!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}([function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}a.d(t,"a",(function(){return r}));var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"run",value:function(){this.reloadConfig();var e=!0,t=!1,a=void 0;try{for(var n,r=this.config[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value,l=new google.maps.Map(o.domElement,{zoom:o.zoom,center:new google.maps.LatLng(o.lat,o.lng),mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,styles:o.style});if(0<o.markers.length){var i=!0,c=!1,u=void 0;try{for(var s,p=o.markers[Symbol.iterator]();!(i=(s=p.next()).done);i=!0){var m=s.value;new google.maps.Marker({position:new google.maps.LatLng(m.lat,m.lng),map:l})}}catch(e){c=!0,u=e}finally{try{i||null==p.return||p.return()}finally{if(c)throw u}}}}}catch(e){t=!0,a=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}}},{key:"reloadConfig",value:function(){var e=document.querySelectorAll(".wdpmb-google-map");if(this.config=new Array,0!==e.length){var t=!0,a=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var l=r.value,i=l.querySelectorAll(".wdpmb-google-map__marker"),c={lat:parseFloat(l.dataset.lat,10),lng:parseFloat(l.dataset.lng,10),zoom:parseInt(l.dataset.zoom,10),domElement:l.querySelector(".wdpmb-google-map__container"),markers:new Array,style:null};if(0<i.length){var u=!0,s=!1,p=void 0;try{for(var m,f=i[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){var d=m.value;c.markers.push({lat:parseFloat(d.dataset.lat),lng:parseFloat(d.dataset.lng)})}}catch(e){s=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw p}}}var g=l.querySelector(".wdpmb-google-map__style");if(null!==g)try{c.style=JSON.parse(this.cleanupJSON(g.innerText))}catch(e){}this.config.push(c)}}catch(e){a=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}}}},{key:"cleanupJSON",value:function(e){return'"'===(e=(e=(e=(e=e.split("&#8221;").join('"')).split("&#8220;").join('"')).split("“").join('"')).split("”").join('"')).substr(0,1)&&(e=e.substr(1)),'"'===e.substr(e.length-1,1)&&(e=e.substr(0,e.length-1)),e=e.split('\\"').join('"')}}])&&n(t.prototype,a),r&&n(t,r),e}())},function(e,t,a){var n;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var o={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var n=r(a);if("string"===n||"number"===n)e.push(a);else if(Array.isArray(a)&&a.length){var i=l.apply(null,a);i&&e.push(i)}else if("object"===n)for(var c in a)o.call(a,c)&&a[c]&&e.push(c)}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):"object"===r(a(2))&&a(2)?void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n):window.classNames=l}()},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(0);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=wp.i18n.__,f=wp.blocks.registerBlockType,d=wp.element,g=d.Fragment,y=d.Component,b=wp.blockEditor.InspectorControls,v=wp.components,h=v.BaseControl,k=v.PanelBody,w=v.Button,S=v.ResizableBox,R=v.RangeControl;void 0!==wp.blocks.registerBlockCollection&&wp.blocks.registerBlockCollection("wdp",{title:m("Blocks by We Do Plugins","maps-block")});var E=function(e){return e=parseInt(e,10),isNaN(e)?e=500:10>e?e=10:1e3<e&&(e=1e3),e},_={latitude:{type:"float",default:51.11147},longitude:{type:"float",default:17.121526},zoom:{type:"integer",default:8},markers:{type:"string",default:'[{"latitude":51.111470,"longitude": 17.121526}]'},mapStyle:{type:"string",default:""},height:{type:"integer",default:500}};f("wdp/maps-block",{title:m("Maps Block (by We Do Plugins)","maps-block"),description:m("Cool Maps Block for new Block Editor.","maps-block"),icon:"index-card",category:"widgets",supports:{align:["wide","full"]},attributes:_,example:{attributes:{defaultAttributes:_}},edit:function(e){function t(e){var a;return i(this,t),(a=u(this,s(t).apply(this,arguments))).props=e,a}var a,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){o.a.run()}},{key:"render",value:function(){var e=this.props,t=e.attributes,a=e.setAttributes,n=e.isSelected,l=e.toggleSelection,i=e.className,c=t.latitude,u=t.longitude,s=t.zoom,p=t.markers,f=t.mapStyle,d=t.height,y=JSON.parse(p);return React.createElement(g,null,React.createElement(b,null,React.createElement(k,{title:m("Map config","maps-block"),initialOpen:!0},React.createElement(R,{label:m("Map height"),value:d,onChange:function(e){a({height:E(e)}),o.a.run()},min:10,max:1e3}),React.createElement("div",{className:"wdp-map-block-latlng-fields"},React.createElement(h,{id:"wdpmb-map-latitude",label:m("Latitude","maps-block")},React.createElement("input",{type:"number",step:"0.0000001",value:c,onChange:function(e){a({latitude:parseFloat(e.target.value,10)}),o.a.run()}})),React.createElement(h,{id:"wdpmb-map-longitude",label:m("Longitude","maps-block")},React.createElement("input",{type:"number",step:"0.0000001",value:u,onChange:function(e){a({longitude:parseFloat(e.target.value,10)}),o.a.run()}}))),React.createElement(h,{id:"wdpmb-map-zoom",label:m("Zoom","maps-block")},React.createElement("input",{type:"number",step:"1",min:"0",max:"40",value:s,onChange:function(e){a({zoom:parseInt(e.target.value,10)}),o.a.run()}}))),React.createElement(k,{title:m("Map markers","maps-block"),initialOpen:!0},y.map((function(e,t){return React.createElement("div",{key:"wdpmb-latlng-fields-marker-".concat(t),className:"wdp-map-block-latlng-fields wdp-map-block-latlng-fields--for-marker"},React.createElement(h,{id:"wdpmb-marker-latitude-".concat(t),label:m("Latitude","maps-block")},React.createElement("input",{type:"number",step:"0.0000001",value:e.latitude,onChange:function(e){var n=y;n[t].latitude=parseFloat(e.target.value,10),a({markers:JSON.stringify(n)}),o.a.run()}})),React.createElement(h,{id:"wdpmb-marker-longitude-".concat(t),label:m("Longitude","maps-block")},React.createElement("input",{type:"number",step:"0.0000001",value:e.longitude,onChange:function(e){var n=y;n[t].longitude=parseFloat(e.target.value,10),a({markers:JSON.stringify(n)}),o.a.run()}})),React.createElement(w,{isSecondary:!0,onClick:function(){var e=y;e.splice(t,1),a({markers:JSON.stringify(e)}),o.a.run()}},m("Remove","maps-block")))})),React.createElement(w,{isSecondary:!0,onClick:function(){var e=y;e.push({latitude:51.11147,longitude:17.121526}),a({markers:JSON.stringify(e)}),o.a.run()}},m("Add new marker","maps-block"))),React.createElement(k,{title:m("Custom map style","maps-block"),initialOpen:!1},React.createElement(h,{id:"wdpmb-json-style",label:m("Map style JSON","maps-block")},React.createElement("div",{className:"wdp-map-block-style-field"},React.createElement("textarea",{onChange:function(e){try{var t=JSON.parse(e.target.value);a({mapStyle:JSON.stringify(t)})}catch(e){a({mapStyle:null})}o.a.run()}},f),React.createElement("p",null,m("You can customize your map style. Check this tools:","maps-block")," ",React.createElement("a",{href:"https://mapstyle.withgoogle.com/",target:"_blank",rel:"noopener noreferrer"},m("Google Maps Styling Wizzard","maps-block")),", ",React.createElement("a",{href:"https://snazzymaps.com/",target:"_blank",rel:"noopener noreferrer"},m("Snazzy Maps","maps-block")),"."))))),React.createElement(S,{className:r()("wdpmb-google-map__wrapper",{"is-selected":n}),size:{height:d},minHeight:10,maxHeight:1e3,enable:{top:!1,right:!1,bottom:!0,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},onResizeStop:function(e,t,n,r){var i=parseInt(d+r.height,10);a({height:i}),l(!0),o.a.run()},onResizeStart:function(){l(!1),o.a.run()}},React.createElement("div",{className:r()(i,"wdpmb-google-map"),"data-lat":c,"data-lng":u,"data-zoom":s},y.map((function(e,t){return React.createElement("div",{key:"wdpmb-marker-".concat(t),className:"wdpmb-google-map__marker","data-lat":e.latitude,"data-lng":e.longitude})})),""!==f&&React.createElement("div",{className:"wdpmb-google-map__style"},f),React.createElement("div",{className:"wdpmb-google-map__container",style:{height:d}}))))}}])&&c(a.prototype,n),l&&c(a,l),t}(y),save:function(e){var t=e.attributes,a=e.className,n=t.latitude,o=t.longitude,l=t.zoom,i=t.markers,c=t.mapStyle,u=t.height,s=JSON.parse(i);return React.createElement("div",{className:r()(a,"wdpmb-google-map"),"data-lat":n,"data-lng":o,"data-zoom":l},s.map((function(e,t){return React.createElement("div",{key:"wdpmb-marker-".concat(t),className:"wdpmb-google-map__marker","data-lat":e.latitude,"data-lng":e.longitude})})),""!==c&&React.createElement("div",{className:"wdpmb-google-map__style"},JSON.stringify(c)),React.createElement("div",{className:"wdpmb-google-map__container",style:{height:u}}))}})}]);